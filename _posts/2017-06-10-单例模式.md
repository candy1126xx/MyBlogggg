---
layout:     post                    # 使用的布局
title:      单例模式               # 标题 
subtitle:   单例模式           #副标题
date:       2017-06-09              # 时间
author:     candy1126xx                      # 作者
header-img: img/home-bg-o.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - 手写代码系列
---

## 单线程实现
```
public class Singleton {
	// private限制访问。static使对象常驻内存
	private static Singleton s;
	// private限制外界不能用构造方法创建对象
	private Singleton(){}
	// 只有当全局没有对象时才能创建
	public static getInstance(){
		if (s == null) {
			s = new Singleton();
		}
		return s;
	}
	
}
```

## 多线程实现
```
public class Singleton {
	// 注意加了volatile
	private volatile static Singleton s;
	private Singleton(){}
	// 注意加锁前后要2次判空
	public static Singleton getInstance(){
        if (s == null) {
            synchronized (Singleton.class) {
                if (s == null) {
                    s = new Singleton();
                }
            }
        }
        return s;
    }
}
```