---
layout:     post                    # 使用的布局
title:      Activity从桌面启动流程(一)               # 标题 
subtitle:   过程1:建立转场动画           #副标题
date:       2017-06-21              # 时间
author:     candy1126xx                      # 作者
header-img: img/home-bg-o.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - 大面试题
---

## 说明
这道面试题考查相当多的内容，包括转场动画、Binder机制、PMS管理组件信息、AMS管理Activity、AMS管理应用进程、对Android运行环境的理解、WMS管理窗口、控件树测布绘流程、Activity状态变更过程等。

## 分解
整个过程分解为16个小过程。

1. 建立转场动画。可以扩展“谈谈Android动画有几类，原理”；
2. 获取AMS通信客户端。可以扩展“ServiceManager进程原理”、“Binder通信原理”；
3. PMS收集Activity信息。可以扩展“应用的安装流程”等；
4. 前一个栈顶Activity进入Pause状态；
5. 创建ActivityRecord、TaskRecord。可以扩展“Activity栈的概念”、“Task的概念”、“Activity启动模式”等；
6. AMS与WMS建立通信；
7. 创建ProcessRecord，新进程启动；可以扩展“Lru管理进程”、“进程保活”、“Binder线程池创建过程”等；
8. 应用进程初始化；
9. 建立应用进程与AMS的双向通信；
10. 建立应用进程的Android运行环境；
11. 创建应用进程的根Activity；
12. 根Activity进入Start状态；
13. 根Activity进入Resume状态；
14. 创建根Activity的窗口。可以扩展“WMS如何管理窗口”、“窗口如何布局排序”等；
15. 根Activity的控件树第一次测布绘；
16. 前一个栈顶Activity进入Stop状态。

## 建立转场动画